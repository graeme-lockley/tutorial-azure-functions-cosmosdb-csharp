- id: create-store-resource-group
  hash: dbec01b271f9d0924d93fa096ad92cb4a842c311ee3771d1831392cd7b8f2d6d
  when: 2022-06-18T12:53:34.716Z
  output:
    - |-
      {
        "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS",
        "location": "centralus",
        "managedBy": null,
        "name": "tutorialAzureFuncCosmosCSS",
        "properties": {
          "provisioningState": "Succeeded"
        },
        "tags": null,
        "type": "Microsoft.Resources/resourceGroups"
      }
- id: create-compute-resource-group
  hash: 8bba999c381e675e7fcce5412e9d3a73f440f9925ab5af59bb264ed1be4156ee
  when: 2022-06-18T12:53:36.132Z
  output:
    - |-
      {
        "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSC",
        "location": "centralus",
        "managedBy": null,
        "name": "tutorialAzureFuncCosmosCSC",
        "properties": {
          "provisioningState": "Succeeded"
        },
        "tags": null,
        "type": "Microsoft.Resources/resourceGroups"
      }
- id: create-cosmos-db
  hash: e9133d84d042f729bb9e097428d401275979981d80218ac06bd4ba5928735933
  when: 2022-06-18T12:56:48.197Z
  output:
    - |-
      {
        "analyticalStorageConfiguration": {
          "schemaType": "WellDefined"
        },
        "apiProperties": null,
        "backupPolicy": {
          "migrationState": null,
          "periodicModeProperties": {
            "backupIntervalInMinutes": 240,
            "backupRetentionIntervalInHours": 8,
            "backupStorageRedundancy": "Geo"
          },
          "type": "Periodic"
        },
        "capabilities": [],
        "capacity": null,
        "connectorOffer": null,
        "consistencyPolicy": {
          "defaultConsistencyLevel": "Session",
          "maxIntervalInSeconds": 5,
          "maxStalenessPrefix": 100
        },
        "cors": [],
        "createMode": null,
        "databaseAccountOfferType": "Standard",
        "defaultIdentity": "FirstPartyIdentity",
        "disableKeyBasedMetadataWriteAccess": false,
        "disableLocalAuth": false,
        "documentEndpoint": "https://tafccdb.documents.azure.com:443/",
        "enableAnalyticalStorage": false,
        "enableAutomaticFailover": false,
        "enableCassandraConnector": null,
        "enableFreeTier": false,
        "enableMultipleWriteLocations": false,
        "failoverPolicies": [
          {
            "failoverPriority": 0,
            "id": "tafccdb-westus",
            "locationName": "West US"
          }
        ],
        "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb",
        "identity": {
          "principalId": null,
          "tenantId": null,
          "type": "None",
          "userAssignedIdentities": null
        },
        "instanceId": "38c45591-f2d9-43d5-a5c4-217da4c234b0",
        "ipRules": [],
        "isVirtualNetworkFilterEnabled": false,
        "keyVaultKeyUri": null,
        "kind": "GlobalDocumentDB",
        "location": "Central US",
        "locations": [
          {
            "documentEndpoint": "https://tafccdb-westus.documents.azure.com:443/",
            "failoverPriority": 0,
            "id": "tafccdb-westus",
            "isZoneRedundant": false,
            "locationName": "West US",
            "provisioningState": "Succeeded"
          }
        ],
        "name": "tafccdb",
        "networkAclBypass": "None",
        "networkAclBypassResourceIds": [],
        "privateEndpointConnections": null,
        "provisioningState": "Succeeded",
        "publicNetworkAccess": "Enabled",
        "readLocations": [
          {
            "documentEndpoint": "https://tafccdb-westus.documents.azure.com:443/",
            "failoverPriority": 0,
            "id": "tafccdb-westus",
            "isZoneRedundant": false,
            "locationName": "West US",
            "provisioningState": "Succeeded"
          }
        ],
        "resourceGroup": "tutorialAzureFuncCosmosCSS",
        "restoreParameters": null,
        "systemData": {
          "createdAt": "2022-06-18T12:55:08.575071+00:00",
          "createdBy": null,
          "createdByType": null,
          "lastModifiedAt": null,
          "lastModifiedBy": null,
          "lastModifiedByType": null
        },
        "tags": {},
        "type": "Microsoft.DocumentDB/databaseAccounts",
        "virtualNetworkRules": [],
        "writeLocations": [
          {
            "documentEndpoint": "https://tafccdb-westus.documents.azure.com:443/",
            "failoverPriority": 0,
            "id": "tafccdb-westus",
            "isZoneRedundant": false,
            "locationName": "West US",
            "provisioningState": "Succeeded"
          }
        ]
      }
    - |-
      {
        "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb/sqlDatabases/FriendDatabase",
        "location": null,
        "name": "FriendDatabase",
        "options": null,
        "resource": {
          "_self": "dbs/qdBRAA==/",
          "colls": "colls/",
          "etag": "\"0000d204-0000-0700-0000-62adcb580000\"",
          "id": "FriendDatabase",
          "rid": "qdBRAA==",
          "ts": 1655556952.0,
          "users": "users/"
        },
        "resourceGroup": "tutorialAzureFuncCosmosCSS",
        "tags": null,
        "type": "Microsoft.DocumentDB/databaseAccounts/sqlDatabases"
      }
    - |-
      {
        "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb/sqlDatabases/FriendDatabase/containers/FriendContainer",
        "location": null,
        "name": "FriendContainer",
        "options": null,
        "resource": {
          "_conflicts": "conflicts/",
          "_docs": "docs/",
          "_self": "dbs/qdBRAA==/colls/qdBRAPumFzk=/",
          "_sprocs": "sprocs/",
          "_triggers": "triggers/",
          "_udfs": "udfs/",
          "analyticalStorageTtl": null,
          "conflictResolutionPolicy": {
            "conflictResolutionPath": "/_ts",
            "conflictResolutionProcedure": "",
            "mode": "LastWriterWins"
          },
          "defaultTtl": null,
          "etag": "\"0000d404-0000-0700-0000-62adcb760000\"",
          "geospatialConfig": {
            "type": "Geography"
          },
          "id": "FriendContainer",
          "indexingPolicy": {
            "automatic": true,
            "compositeIndexes": null,
            "excludedPaths": [
              {
                "path": "/\"_etag\"/?"
              }
            ],
            "includedPaths": [
              {
                "indexes": null,
                "path": "/*"
              }
            ],
            "indexingMode": "consistent",
            "spatialIndexes": null
          },
          "partitionKey": {
            "kind": "Hash",
            "paths": [
              "/LastName"
            ],
            "systemKey": null,
            "version": null
          },
          "rid": "qdBRAPumFzk=",
          "statistics": [
            {
              "documentCount": 0,
              "id": "0",
              "partitionKeys": [],
              "sampledDistinctPartitionKeyCount": 0,
              "sizeInKB": 0
            }
          ],
          "ts": 1655556982.0,
          "uniqueKeyPolicy": {
            "uniqueKeys": []
          }
        },
        "resourceGroup": "tutorialAzureFuncCosmosCSS",
        "tags": null,
        "type": "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers"
      }
- id: create-cosmos-cli-role
  hash: 7c950f8bbc0db6e795ff579c2049b4b4b23d5baab30873deb87f49132e19b53c
  when: 2022-06-18T12:57:19.976Z
  output:
    - |-
      {
        "assignableScopes": [
          "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb"
        ],
        "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb/sqlRoleDefinitions/ef7a55a8-2186-4f0a-9033-c837c1b96b13",
        "name": "ef7a55a8-2186-4f0a-9033-c837c1b96b13",
        "permissions": [
          {
            "dataActions": [
              "Microsoft.DocumentDB/databaseAccounts/readMetadata",
              "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/items/*",
              "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/*"
            ],
            "notDataActions": []
          }
        ],
        "resourceGroup": "tutorialAzureFuncCosmosCSS",
        "roleName": "CLIRole",
        "type": "Microsoft.DocumentDB/databaseAccounts/sqlRoleDefinitions",
        "typePropertiesType": "CustomRole"
      }
- id: assign-cli-role-to-me
  hash: 56883f6d2815c38bcb0a77ae5ae28b44d6167945b4036ef6ff220f5d4132e670
  when: 2022-06-18T13:18:02.510Z
  output:
    - |-
      [
        {
          "assignableScopes": [
            "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb"
          ],
          "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb/sqlRoleDefinitions/ef7a55a8-2186-4f0a-9033-c837c1b96b13",
          "name": "ef7a55a8-2186-4f0a-9033-c837c1b96b13",
          "permissions": [
            {
              "dataActions": [
                "Microsoft.DocumentDB/databaseAccounts/readMetadata",
                "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/items/*",
                "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/*"
              ],
              "notDataActions": []
            }
          ],
          "resourceGroup": "tutorialAzureFuncCosmosCSS",
          "roleName": "CLIRole",
          "type": "Microsoft.DocumentDB/databaseAccounts/sqlRoleDefinitions",
          "typePropertiesType": "CustomRole"
        }
      ]
    - |-
      {
        "id": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb/sqlRoleAssignments/aea13de6-6481-46c8-a92e-f06cbc21257d",
        "name": "aea13de6-6481-46c8-a92e-f06cbc21257d",
        "principalId": "22395703-af19-49be-a81f-ba230562fce3",
        "resourceGroup": "tutorialAzureFuncCosmosCSS",
        "roleDefinitionId": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb/sqlRoleDefinitions/ef7a55a8-2186-4f0a-9033-c837c1b96b13",
        "scope": "/subscriptions/2ee96cab-57d3-472f-9d74-b9a9dc556def/resourceGroups/tutorialAzureFuncCosmosCSS/providers/Microsoft.DocumentDB/databaseAccounts/tafccdb",
        "type": "Microsoft.DocumentDB/databaseAccounts/sqlRoleAssignments"
      }
- id: populate-cosmos-db
  hash: de0cf88f07446136210cf65d9b8b45f5227017b4cad9e44fab24793e15ce7a6f
  when: 2022-06-18T13:18:20.660Z
  output: "Connected to Cosmos: https://tafccdb.documents.azure.com:443/\nAccessed Container: FriendContainer\nCreated item in database with id: e1be5a0b-7c65-45fe-ac7c-4646110087c8 Operation consumed 6.67 RUs.\nCreated item in database with id: f3b76df4-022b-4945-acf1-dc3903ecc1e4 Operation consumed 6.48 RUs.\nRunning query: SELECT * FROM c WHERE c.LastName = 'Lockley'\n\tRead CoreLibrary.Entity.Friend\n\tRead CoreLibrary.Entity.Friend\nLockley, Graeme\nLockley, David"
